<!doctype html>
<html lang="en" class="h-full">
 <head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Rhetorical Appeals Escape Room</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Quicksand:wght@400;500;600&display=swap" rel="stylesheet">
  <style>
    body {
      box-sizing: border-box;
    }
    .font-display { font-family: 'Playfair Display', serif; }
    .font-body { font-family: 'Quicksand', sans-serif; }
    
    @keyframes float {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-20px) rotate(5deg); }
    }
    
    @keyframes pulse-glow {
      0%, 100% { box-shadow: 0 0 20px rgba(244, 114, 182, 0.4); }
      50% { box-shadow: 0 0 40px rgba(244, 114, 182, 0.8); }
    }
    
    @keyframes confetti-fall {
      0% { transform: translateY(-100%) rotate(0deg); opacity: 1; }
      100% { transform: translateY(100%) rotate(720deg); opacity: 0; }
    }
    
    .floating-heart {
      animation: float 3s ease-in-out infinite;
    }
    
    .pulse-button {
      animation: pulse-glow 2s ease-in-out infinite;
    }
    
    .confetti {
      position: fixed;
      width: 10px;
      height: 10px;
      animation: confetti-fall 3s linear forwards;
    }
    
    .card-enter {
      animation: slideUp 0.5s ease-out forwards;
    }
    
    @keyframes slideUp {
      from { opacity: 0; transform: translateY(30px); }
      to { opacity: 1; transform: translateY(0); }
    }
    
    .wrong-shake {
      animation: shake 0.5s ease-in-out;
    }
    
    @keyframes shake {
      0%, 100% { transform: translateX(0); }
      20%, 60% { transform: translateX(-10px); }
      40%, 80% { transform: translateX(10px); }
    }
    
    .heart-bg {
      background: linear-gradient(135deg, #fdf2f8 0%, #fce7f3 50%, #fbcfe8 100%);
    }
    
    .progress-heart {
      transition: all 0.3s ease;
    }

    .lesson-box {
      border-radius: 1rem;
      padding: 1.5rem;
      margin-bottom: 1rem;
    }
  </style>
 </head>
 <body class="h-full font-body">
  <div id="app" class="h-full heart-bg overflow-auto">
   <!-- Floating Hearts Background -->
   <div class="fixed inset-0 pointer-events-none overflow-hidden">
    <div class="floating-heart absolute text-4xl" style="left: 5%; top: 10%; animation-delay: 0s;">ğŸ’•</div>
    <div class="floating-heart absolute text-3xl" style="left: 15%; top: 60%; animation-delay: 0.5s;">ğŸ’—</div>
    <div class="floating-heart absolute text-5xl" style="left: 85%; top: 20%; animation-delay: 1s;">ğŸ’–</div>
    <div class="floating-heart absolute text-2xl" style="left: 90%; top: 70%; animation-delay: 1.5s;">ğŸ’</div>
    <div class="floating-heart absolute text-4xl" style="left: 50%; top: 5%; animation-delay: 2s;">ğŸ’˜</div>
    <div class="floating-heart absolute text-3xl" style="left: 75%; top: 85%; animation-delay: 0.3s;">ğŸ’“</div>
    <div class="floating-heart absolute text-2xl" style="left: 25%; top: 80%; animation-delay: 1.2s;">ğŸ’</div>
   </div>
   <!-- Main Content Container -->
   <div id="content" class="relative z-10 min-h-full flex items-center justify-center p-4">
    <!-- Content will be injected here -->
   </div>
  </div>
  
  <script>
    const config = {
      main_title: "Rhetorical Appeals Escape Room",
      completion_message: "You've Escaped!",
      background_color: "#fdf2f8",
      card_color: "#ffffff",
      text_color: "#831843",
      primary_action_color: "#ec4899",
      secondary_action_color: "#f472b6"
    };

    let currentScreen = 0;

    const screens = [
      {
        type: "intro",
        title: "Welcome to the Rhetorical Appeals Escape Room! ğŸ’˜",
        content: "You're trapped in a room! To escape, you must prove your knowledge of the four rhetorical appeals: Pathos, Logos, Ethos, and Kairos.\n\nâš ï¸ Warning: Answer incorrectly and you'll be sent back to the beginning!\n\nAre you ready to unlock your way out?"
      },
      {
        type: "lesson",
        title: "ğŸ“– PATHOS: Appeal to Emotion",
        definition: "Pathos is an appeal to the audience's EMOTIONS and FEELINGS.",
        explanation: "When a speaker or writer uses pathos, they want you to FEEL somethingâ€”sadness, joy, fear, compassion, excitement, or anger. They might use vivid descriptions, personal stories, or imagery that makes you emotional.",
        examples: [
          "ğŸ¶ A sad puppy in a shelter commercial asking for help",
          "ğŸ‘µ Picturing your grandmother's face when you call her",
          "ğŸ˜¢ A story about a family losing their home",
          "ğŸ˜° Imagining yourself or someone you love in danger"
        ]
      },
      {
        type: "question",
        number: "1/8",
        question: "Which of the following is an example of PATHOS?",
        options: [
          "A: Studies show that 9 out of 10 dentists recommend this toothpaste.",
          "B: Picture your grandmother's face lighting up when she sees you've remembered her birthday.",
          "C: As a doctor with 20 years of experience, I can assure you this treatment works.",
          "D: Only 3 hours left! Sale ends at midnight!"
        ],
        correct: 1,
        explanation: "This appeals to emotion by asking you to imagine a heartwarming family moment. ğŸ’• That's PATHOS!"
      },
      {
        type: "question",
        number: "2/8",
        question: "Which of the following is an example of PATHOS?",
        options: [
          "A: Research shows that homes with smoke detectors are 50% less likely to have fire fatalities.",
          "B: As a firefighter for 25 years, I can tell you smoke detectors save lives.",
          "C: Imagine waking up to your house on fire with no way to escape!",
          "D: Limited time! Fire safety awareness month ends soon!"
        ],
        correct: 2,
        explanation: "This makes you FEEL the fear and danger of a fire emergencyâ€”that's PATHOS! ğŸ”¥"
      },
      {
        type: "lesson",
        title: "ğŸ“Š LOGOS: Appeal to Logic",
        definition: "Logos is an appeal to the audience's REASON and LOGIC.",
        explanation: "When a speaker or writer uses logos, they use facts, statistics, data, research, and logical reasoning. They want you to think carefully and use your brain to understand their argument.",
        examples: [
          "ğŸ“ˆ \"Studies show students with 8 hours of sleep have 40% better test scores\"",
          "ğŸ§® Cause and effect: \"If you don't eat breakfast, your brain won't have fuel for learning\"",
          "ğŸ” Scientific evidence from a trusted source",
          "ğŸ“Š Statistics and percentages that prove a point"
        ]
      },
      {
        type: "question",
        number: "3/8",
        question: "Which of the following is an example of LOGOS?",
        options: [
          "A: Think about how exhausted and hungry you feel by 5th period!",
          "B: Research shows students with longer lunch periods have 23% better afternoon test scores.",
          "C: I've been a principal for 10 years, so trust me on this.",
          "D: Lunch time is changing next weekâ€”don't miss the announcement!"
        ],
        correct: 1,
        explanation: "This uses research data and statistics to support the argumentâ€”that's LOGOS! ğŸ“Š"
      },
      {
        type: "question",
        number: "4/8",
        question: "Which of the following is an example of LOGOS?",
        options: [
          "A: Imagine a world destroyed by climate change.",
          "B: Scientists agree that climate change is happening because carbon emissions have increased 50% since 1990.",
          "C: As an environmental activist, I'm telling you we need to act now.",
          "D: Climate action month is hereâ€”join us today before it's too late!"
        ],
        correct: 1,
        explanation: "This uses specific data (50% increase) and cause-and-effect logicâ€”that's LOGOS! ğŸŒ"
      },
      {
        type: "lesson",
        title: "ğŸ‘‘ ETHOS: Appeal to Credibility",
        definition: "Ethos is an appeal based on the speaker's CREDIBILITY, AUTHORITY, and TRUSTWORTHINESS.",
        explanation: "When a speaker or writer uses ethos, they establish themselves as an expert or trustworthy source. They might mention their experience, credentials, reputation, or position of authority.",
        examples: [
          "ğŸ‘¨â€âš•ï¸ \"As a doctor with 30 years of experience...\"",
          "ğŸ¢ \"We've been America's most trusted brand for 50 years\"",
          "ğŸ“ \"I have a PhD in environmental science, and I'm telling you...\"",
          "ğŸ… A famous athlete endorsing a product because they use it"
        ]
      },
      {
        type: "question",
        number: "5/8",
        question: "Which of the following is an example of ETHOS?",
        options: [
          "A: You'll feel so much better after eating healthyâ€”imagine your future self!",
          "B: 87% of nutritionists agree that whole grains are essential.",
          "C: I've been a certified nutritionist for 15 years, so you can trust my advice.",
          "D: Limited time offerâ€”start your diet today before the sale ends!"
        ],
        correct: 2,
        explanation: "The speaker's 15 years of experience establishes CREDIBILITY and TRUSTâ€”that's ETHOS! ğŸ‘¨â€âš•ï¸"
      },
      {
        type: "question",
        number: "6/8",
        question: "Which of the following is an example of ETHOS?",
        options: [
          "A: Four out of five dentists recommend Sparkle Toothpaste.",
          "B: Imagine showing off your bright, beautiful smile at prom!",
          "C: We've been America's most trusted dental brand for 50 years.",
          "D: Back-to-school saleâ€”buy toothpaste now and save 40%!"
        ],
        correct: 0,
        explanation: "Using expert opinion (dentists) and authority establishes CREDIBILITYâ€”that's ETHOS! ğŸ¦·"
      },
      {
        type: "lesson",
        title: "â° KAIROS: Appeal to Timing",
        definition: "Kairos is an appeal based on TIMING and URGENCYâ€”using the right message at the RIGHT MOMENT.",
        explanation: "When a speaker or writer uses kairos, they take advantage of a specific moment in time. The message is more powerful because of WHEN it's being delivered. It creates urgency or capitalizes on current events.",
        examples: [
          "ğŸ–ï¸ \"Summer is hereâ€”buy sunscreen before you head to the beach!\"",
          "ğŸ’” Speaking about kindness RIGHT AFTER a bullying incident happened",
          "ğŸ… \"Black Friday dealsâ€”only 24 hours left!\"",
          "ğŸ—³ï¸ \"Election day is tomorrowâ€”make sure you vote!\""
        ]
      },
      {
        type: "question",
        number: "7/8",
        question: "Which of the following is an example of KAIROS?",
        options: [
          "A: This sunscreen has been scientifically proven to prevent 99% of UV rays.",
          "B: Remember how terrible it felt to get sunburned last summer?",
          "C: Summer is hereâ€”buy sunscreen today before the beach season rush!",
          "D: Dr. Johnson, a dermatologist, recommends SPF 50."
        ],
        correct: 2,
        explanation: "The LIMITED TIME and SEASONAL URGENCY create pressure at the RIGHT MOMENTâ€”that's KAIROS! â°"
      },
      {
        type: "question",
        number: "8/8",
        question: "Which of the following is an example of KAIROS?",
        options: [
          "A: Bullying is never acceptable, and we must stand together.",
          "B: Right after the bullying incident, the principal says: \"Now is the time to show kindness.\"",
          "C: Studies show that schools with anti-bullying programs are 40% safer.",
          "D: Our former student, now a counselor, wants to share her bullying prevention advice."
        ],
        correct: 1,
        explanation: "Delivering the message at the PERFECT MOMENT makes it most powerfulâ€”that's KAIROS! ğŸ¯"
      },
      {
        type: "boss"
      },
      {
        type: "victory"
      }
    ];

    function createConfetti() {
      const colors = ['#ec4899', '#f472b6', '#fb7185', '#fda4af', '#f43f5e', '#e11d48'];
      const container = document.getElementById('app');
      
      for (let i = 0; i < 50; i++) {
        const confetti = document.createElement('div');
        confetti.className = 'confetti';
        confetti.style.left = Math.random() * 100 + '%';
        confetti.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
        confetti.style.borderRadius = Math.random() > 0.5 ? '50%' : '0';
        confetti.style.animationDelay = Math.random() * 2 + 's';
        container.appendChild(confetti);
        
        setTimeout(() => confetti.remove(), 5000);
      }
    }

    function renderScreen() {
      const content = document.getElementById('content');
      const screen = screens[currentScreen];
      
      const bgColor = config.background_color;
      const cardColor = config.card_color;
      const textColor = config.text_color;
      const primaryColor = config.primary_action_color;
      const secondaryColor = config.secondary_action_color;

      // Progress indicator - count only questions
      const totalQuestions = screens.filter(s => s.type === 'question').length;
      const answeredQuestions = screens.slice(0, currentScreen).filter(s => s.type === 'question').length;
      
      let progressHTML = '';
      if (screen.type !== 'intro' && screen.type !== 'victory') {
        const hearts = [];
        for (let i = 0; i < totalQuestions; i++) {
          const filled = i < answeredQuestions;
          hearts.push(`<span class="progress-heart text-2xl ${filled ? 'opacity-100' : 'opacity-30'}">${filled ? 'ğŸ’–' : 'ğŸ¤'}</span>`);
        }
        progressHTML = `<div class="flex gap-1 justify-center mb-4">${hearts.join('')}</div>`;
      }

      if (screen.type === 'intro') {
        content.innerHTML = `
          <div class="card-enter max-w-2xl w-full rounded-3xl p-8 shadow-2xl" style="background-color: ${cardColor};">
            ${progressHTML}
            <div class="text-center">
              <div class="text-6xl mb-4">ğŸ”ğŸ’•</div>
              <h1 class="font-display text-3xl md:text-4xl font-bold mb-6" style="color: ${textColor};">${config.main_title}</h1>
              <p class="text-lg mb-8 whitespace-pre-line" style="color: ${textColor};">${screen.content}</p>
              <button onclick="nextScreen()" class="pulse-button text-white font-semibold text-xl px-8 py-4 rounded-full transition-all hover:scale-105" style="background-color: ${primaryColor};">
                ğŸ’˜ Start Your Escape! ğŸ’˜
              </button>
            </div>
          </div>
        `;
      } else if (screen.type === 'lesson') {
        content.innerHTML = `
          <div class="card-enter max-w-2xl w-full rounded-3xl p-8 shadow-2xl" style="background-color: ${cardColor};">
            ${progressHTML}
            <div class="text-center mb-6">
              <h1 class="font-display text-3xl md:text-4xl font-bold" style="color: ${textColor};">${screen.title}</h1>
            </div>

            <div class="lesson-box" style="background-color: ${bgColor}; border: 2px solid ${secondaryColor};">
              <h2 class="font-semibold text-xl mb-3" style="color: ${primaryColor};">ğŸ“š Definition:</h2>
              <p class="text-lg font-semibold mb-4" style="color: ${textColor};">${screen.definition}</p>
              
              <h3 class="font-semibold text-lg mb-2" style="color: ${primaryColor};">What does this mean?</h3>
              <p class="mb-4" style="color: ${textColor};">${screen.explanation}</p>
              
              <h3 class="font-semibold text-lg mb-3" style="color: ${primaryColor};">ğŸ’¡ Real-World Examples:</h3>
              <ul class="space-y-2">
                ${screen.examples.map(ex => `<li style="color: ${textColor};" class="flex gap-2">
                  <span>â€¢</span>
                  <span>${ex}</span>
                </li>`).join('')}
              </ul>
            </div>

            <button onclick="nextScreen()" class="w-full text-white font-semibold text-lg py-4 rounded-full transition-all hover:scale-105 mt-6" style="background-color: ${primaryColor};">
              âœ… I understand! Show me the questions. â†’
            </button>
          </div>
        `;
      } else if (screen.type === 'question') {
        content.innerHTML = `
          <div id="question-card" class="card-enter max-w-2xl w-full rounded-3xl p-8 shadow-2xl" style="background-color: ${cardColor};">
            ${progressHTML}
            <div class="text-center mb-4">
              <span class="inline-block px-4 py-1 rounded-full text-white text-sm font-semibold" style="background-color: ${secondaryColor};">Question ${screen.number}</span>
            </div>
            <h2 class="font-display text-xl md:text-2xl font-semibold mb-6 text-center" style="color: ${textColor};">${screen.question}</h2>
            <div id="options" class="space-y-3">
              ${screen.options.map((opt, i) => `
                <button onclick="checkAnswer(${i})" class="answer-btn w-full text-left p-4 rounded-xl border-2 transition-all hover:scale-102 hover:shadow-md font-medium" style="border-color: ${secondaryColor}; color: ${textColor}; background-color: ${cardColor};">
                  ${opt}
                </button>
              `).join('')}
            </div>
            <div id="feedback" class="hidden mt-6 p-4 rounded-xl text-center"></div>
          </div>
        `;
      } else if (screen.type === 'boss') {
        content.innerHTML = `
          <div class="card-enter max-w-2xl w-full rounded-3xl p-8 shadow-2xl" style="background-color: ${cardColor};">
            <div class="text-center mb-6">
              <div class="text-6xl mb-4">âš”ï¸ğŸ’•ğŸ†</div>
              <h1 class="font-display text-3xl font-bold" style="color: ${textColor};">FINAL BOSS BATTLE!</h1>
              <p class="mt-2" style="color: ${textColor};">Match each definition to the correct rhetorical appeal!</p>
            </div>
            
            <div id="matching-section" class="space-y-4">
              <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <!-- Definitions -->
                <div>
                  <h3 class="font-semibold text-lg mb-3" style="color: ${primaryColor};">Definitions:</h3>
                  <div id="definitions" class="space-y-2">
                    <div class="p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; background-color: ${bgColor}; color: ${textColor};">
                      1. Appeal to EMOTION and feelings
                    </div>
                    <div class="p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; background-color: ${bgColor}; color: ${textColor};">
                      2. Appeal to LOGIC and reason/data
                    </div>
                    <div class="p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; background-color: ${bgColor}; color: ${textColor};">
                      3. Appeal to CREDIBILITY and trust
                    </div>
                    <div class="p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; background-color: ${bgColor}; color: ${textColor};">
                      4. Appeal to TIMING and urgency
                    </div>
                  </div>
                </div>
                
                <!-- Appeals to match -->
                <div>
                  <h3 class="font-semibold text-lg mb-3" style="color: ${primaryColor};">Appeals:</h3>
                  <div id="appeals" class="space-y-2">
                    <select id="match-1" class="w-full p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; color: ${textColor}; background-color: ${bgColor};">
                      <option value="">-- Select for Def 1 --</option>
                      <option value="pathos">Pathos</option>
                      <option value="logos">Logos</option>
                      <option value="ethos">Ethos</option>
                      <option value="kairos">Kairos</option>
                    </select>
                    <select id="match-2" class="w-full p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; color: ${textColor}; background-color: ${bgColor};">
                      <option value="">-- Select for Def 2 --</option>
                      <option value="pathos">Pathos</option>
                      <option value="logos">Logos</option>
                      <option value="ethos">Ethos</option>
                      <option value="kairos">Kairos</option>
                    </select>
                    <select id="match-3" class="w-full p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; color: ${textColor}; background-color: ${bgColor};">
                      <option value="">-- Select for Def 3 --</option>
                      <option value="pathos">Pathos</option>
                      <option value="logos">Logos</option>
                      <option value="ethos">Ethos</option>
                      <option value="kairos">Kairos</option>
                    </select>
                    <select id="match-4" class="w-full p-3 rounded-lg border-2" style="border-color: ${secondaryColor}; color: ${textColor}; background-color: ${bgColor};">
                      <option value="">-- Select for Def 4 --</option>
                      <option value="pathos">Pathos</option>
                      <option value="logos">Logos</option>
                      <option value="ethos">Ethos</option>
                      <option value="kairos">Kairos</option>
                    </select>
                  </div>
                </div>
              </div>
            </div>
            
            <div id="boss-feedback" class="hidden mt-6 p-4 rounded-xl text-center"></div>
            
            <div class="flex gap-4 mt-8 justify-center">
              <button onclick="submitBossBattle()" class="text-white font-semibold text-lg px-8 py-3 rounded-full transition-all hover:scale-105" style="background-color: ${primaryColor};">
                âš”ï¸ Submit Answers âš”ï¸
              </button>
              <button onclick="currentScreen--; renderScreen();" class="text-white font-semibold text-lg px-8 py-3 rounded-full transition-all hover:scale-105" style="background-color: ${secondaryColor};">
                Back
              </button>
            </div>
          </div>
        `;
      } else if (screen.type === 'victory') {
        createConfetti();
        content.innerHTML = `
          <div class="card-enter max-w-2xl w-full rounded-3xl p-8 shadow-2xl text-center" style="background-color: ${cardColor};">
            <div class="text-7xl mb-4">ğŸ‰ğŸ’–ğŸ†ğŸ’–ğŸ‰</div>
            <h1 class="font-display text-4xl md:text-5xl font-bold mb-4" style="color: ${textColor};">${config.completion_message}</h1>
            <p class="text-xl mb-6" style="color: ${textColor};">You've mastered Pathos, Logos, Ethos, and Kairos!</p>
            
            <div class="rounded-2xl p-6 mb-6" style="background-color: ${bgColor};">
              <div class="text-4xl mb-2">ğŸ“¸</div>
              <h2 class="font-display text-2xl font-bold mb-2" style="color: ${primaryColor};">SCREENSHOT THIS PAGE!</h2>
              <p class="text-lg font-semibold" style="color: ${textColor};">Turn in your screenshot for your homework assignment! âœ…</p>
            </div>
            
            <div class="flex justify-center gap-2 text-4xl">
              <span>ğŸ’•</span><span>ğŸ’˜</span><span>ğŸ’</span><span>ğŸ’–</span><span>ğŸ’—</span>
            </div>
            <p class="mt-4 font-semibold" style="color: ${secondaryColor};">Happy Valentine's Day from your English class! ğŸ’Œ</p>
          </div>
        `;
      }
    }

    function checkAnswer(selected) {
      const screen = screens[currentScreen];
      const feedback = document.getElementById('feedback');
      const questionCard = document.getElementById('question-card');
      const buttons = document.querySelectorAll('.answer-btn');
      const primaryColor = config.primary_action_color;
      const textColor = config.text_color;
      
      buttons.forEach(btn => btn.disabled = true);
      
      if (selected === screen.correct) {
        buttons[selected].style.backgroundColor = '#10b981';
        buttons[selected].style.borderColor = '#10b981';
        buttons[selected].style.color = 'white';
        
        feedback.className = 'mt-6 p-4 rounded-xl text-center';
        feedback.style.backgroundColor = '#d1fae5';
        feedback.innerHTML = `
          <div class="text-3xl mb-2">ğŸ’–âœ¨</div>
          <p class="font-semibold" style="color: #065f46;">Correct! ${screen.explanation}</p>
          <button onclick="nextScreen()" class="mt-4 text-white font-semibold px-6 py-2 rounded-full" style="background-color: ${primaryColor};">
            Continue â†’
          </button>
        `;
      } else {
        buttons[selected].style.backgroundColor = '#ef4444';
        buttons[selected].style.borderColor = '#ef4444';
        buttons[selected].style.color = 'white';
        questionCard.classList.add('wrong-shake');
        
        feedback.className = 'mt-6 p-4 rounded-xl text-center';
        feedback.style.backgroundColor = '#fee2e2';
        feedback.innerHTML = `
          <div class="text-3xl mb-2">ğŸ’”</div>
          <p class="font-semibold" style="color: #991b1b;">Oops! That's not quite right.</p>
          <p class="mt-2" style="color: ${textColor};">The correct answer was: <strong>${screen.options[screen.correct]}</strong></p>
          <p class="mt-2" style="color: ${textColor};">${screen.explanation}</p>
          <p class="mt-4 text-lg font-bold" style="color: #991b1b;">Back to the beginning! ğŸ”„</p>
          <button onclick="restartGame()" class="mt-4 text-white font-semibold px-6 py-2 rounded-full" style="background-color: ${primaryColor};">
            Try Again ğŸ’ª
          </button>
        `;
      }
    }

    function submitBossBattle() {
      const answers = [
        document.getElementById('match-1').value,
        document.getElementById('match-2').value,
        document.getElementById('match-3').value,
        document.getElementById('match-4').value
      ];

      const correctAnswers = ['pathos', 'logos', 'ethos', 'kairos'];
      const allAnswered = answers.every(a => a !== '');
      const allCorrect = answers.every((a, i) => a === correctAnswers[i]);

      const feedback = document.getElementById('boss-feedback');
      const primaryColor = config.primary_action_color;
      const textColor = config.text_color;

      if (!allAnswered) {
        feedback.className = 'mt-6 p-4 rounded-xl text-center';
        feedback.style.backgroundColor = '#fef3c7';
        feedback.innerHTML = `
          <div class="text-3xl mb-2">âš ï¸</div>
          <p class="font-semibold" style="color: #92400e;">Please select an answer for each definition!</p>
        `;
        feedback.scrollIntoView({ behavior: 'smooth' });
        return;
      }

      if (allCorrect) {
        feedback.className = 'mt-6 p-4 rounded-xl text-center';
        feedback.style.backgroundColor = '#d1fae5';
        feedback.innerHTML = `
          <div class="text-4xl mb-2">ğŸ‰âš”ï¸ğŸ’–ğŸ†</div>
          <p class="font-semibold" style="color: #065f46;">PERFECT! You've defeated the boss!</p>
          <button onclick="nextScreen()" class="mt-4 text-white font-semibold px-6 py-2 rounded-full" style="background-color: ${primaryColor};">
            Proceed to Victory! â†’
          </button>
        `;
      } else {
        const matchingSection = document.getElementById('matching-section');
        matchingSection.classList.add('wrong-shake');
        
        feedback.className = 'mt-6 p-4 rounded-xl text-center';
        feedback.style.backgroundColor = '#fee2e2';
        feedback.innerHTML = `
          <div class="text-3xl mb-2">ğŸ’”âš”ï¸ğŸ‘¹</div>
          <p class="font-semibold" style="color: #991b1b;">Not quite right! The boss is getting stronger!</p>
          <p class="mt-2" style="color: ${textColor};">Check your matches and try again!</p>
          <p class="mt-4 text-lg font-bold" style="color: #991b1b;">Back to the beginning! ğŸ”„</p>
          <button onclick="restartGame()" class="mt-4 text-white font-semibold px-6 py-2 rounded-full" style="background-color: ${primaryColor};">
            Restart Game ğŸ’ª
          </button>
        `;
      }
      feedback.scrollIntoView({ behavior: 'smooth' });
    }

    function nextScreen() {
      currentScreen++;
      renderScreen();
    }

    function restartGame() {
      currentScreen = 0;
      renderScreen();
    }

    // Initialize on page load
    renderScreen();
  </script>
 </body>
</html>
